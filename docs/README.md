# Cloud One AmaaS gRPC SDK for Python

A Python library for interacting with the Cloud One Antimalware as a Service API.

## Prerequisites

- Python 3.7 or newer
- [CloudOne API Key](https://cloudone.trendmicro.com/docs/identity-and-account-management/c1-api-key/)


## Build SDK

1. The following instructions assumes you are at downloaded or cloned package directory.

    Multiple targets are supported by Makefile.dev:
    - build
    - clean

2. Export environment variables, as an example:

   ```sh
   export BUILD_MAJOR=1
   export BUILD_MINOR=0
   export BUILD_PATCH=0
   export BUILD_NUMBER=1001
   ```

3. Run make command.

   ```sh
   make -f Makefile.dev build
   ```

   - Two artifacts will be generated and can be found under `/dist/`.

   - amaas_grpc-1.0.0-1001-py3-none-any.whl - the amaas grpc Python SDK package
   - amaas-grpc-1.0.0.tar.gz - the archive (tar.gz) format of amaas grpc Python SDK package

## Install SDK

1. Install AmaaS gRPC Python SDK located under `/dist/` directory.

   ```sh
   python3 -m pip install ./dist/amaas_grpc-1.0.0-1001-py3-none-any.whl
   ```


## Run SDK

### Run with AmaaS example programs

1. Go to `/examples/` in current directory.

   ```sh
   cd examples/
   ```


2. There are two Python examples in the folder, one with regular file i/o and one with asynchronous file i/o
   
   ```
   client_aio.py
   client.py
   ``` 
3. Current Python examples support following command line arguments

   | Command Line Arguments                 | Value                    | Optional |
   | :------------------ | :----------------------- | :------- |
   | --addr or -a   | antimalware.us-1.cloudone.trendmicro.com:443 | No       |
   | --api_key      | Cloud One \<API KEY\>              | No       |
   | --filename or -f |        File to be scanned            | No       |



4. Run one of the examples.

   ```sh
   python3 client.py -f FILENAME -a ADDR --api_key API_KEY
   ```
